
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Usage and implementation details &#8212; Time-lapse Cole-Cole decomposition routines 0.8.17.dev0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Input Data files" href="data_formats.html" />
    <link rel="prev" title="Inversion and implementation details" href="inversion.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="usage-and-implementation-details">
<h1>Usage and implementation details<a class="headerlink" href="#usage-and-implementation-details" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_formats.html">Input Data files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_formats.html#input-data-formats">Input data formats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_formats.html#output-files">Output Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_formats.html#ascii-audit-format">ascii_audit format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data_formats.html#header">header</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_formats.html#files">Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_formats.html#ascii-format">ascii format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data_formats.html#input-data">Input data</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_formats.html#filter-results">Filter results</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_formats.html#primary-fit-results">Primary fit results</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_formats.html#integral-parameters">Integral parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="starting_models.html">Starting Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="starting_models.html#model-1">Model 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="starting_models.html#model-2">Model 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="starting_models.html#model-3">Model 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="starting_models.html#notes-on-possible-conductivity-extension">Notes on possible conductivity extension</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="best-practices">
<h2>Best practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h2>
<p>The following procedure is recommended for new data sets and focuses on
inversions using <em>ccd_single</em> and <em>ccd_time</em>:</p>
<ul>
<li><p>Initially invert with variable <img class="math" src="_images/math/cefc603e5658facb747581f9567192993f21c7ab.png" alt="\lambda"/> values for the frequency
regularization</p></li>
<li><p>Fine-tune with a fixed lambda (this in general yields more robust results and
makes results comparable)</p></li>
<li><p>Usually the third starting model yields the most robust results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DD_STARTING_MODEL</span><span class="o">=</span><span class="mi">3</span> <span class="n">cdd_single</span> <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>Normalization can help… :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ccd_single</span> <span class="o">--</span><span class="n">norm</span> <span class="mi">10</span>
</pre></div>
</div>
</li>
<li><p>For time regularization: here only a fixed lambda can be used. Start with a
small value and take a look at the maximum regularization strength for the
time-regularization. The regularization strength is automatically plotted
when the <strong class="command">--plot</strong> option is enabled.</p></li>
<li><p>while the structure of the input files is fixed, the data format can be
changed using the <strong class="command">--data_format</strong> option. Thus a conversion from
conductivities to resistivities and vice versa is not necessary, as well as a
conversion between real/imaginary part and magnitude/phase format.</p></li>
<li><p>the <strong class="command">--tmp</strong> option can improve execution speed on conventional hard
drives (don’t expect huge improvements for solid state discs (SSDs).</p></li>
</ul>
</div>
<div class="section" id="normalization">
<h2>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">¶</a></h2>
<p>The CDD is linear in <img class="math" src="_images/math/ab96ae9f40e5499605c7537eb4e357c43d54ff9b.png" alt="\rho_0/\sigma_\infty"/>, as as such data can be
normalized both in magnitude/phase, or real and imaginary parts:</p>
<div class="math">
<p><img src="_images/math/d310961b017472c6e10cb0b44816a6ad4e899ba0.png" alt="\rho'_{norm} &amp;= A \cdot \rho'\\
   \rho''_{norm} &amp;= A \cdot \rho''\\
   \rho'(\omega)_{norm} &amp;= A \cdot \left(\rho_0 -  \rho_0 \sum_{i=1}^N m_i
\frac{(\omega \tau_i)^2}{1 + (\omega \tau_i)^2}\right)\\
   \rho''(\omega)_{norm} &amp;= A \cdot \left(- \rho_0 \sum_{i=1}^N m_i \frac{(\omega
\tau_k)}{1 + (\omega \tau_k)^2} \right)"/></p>
</div><p>The factor A is determined by norming the lowest frequency
<img class="math" src="_images/math/d3e622b03b3d1f46934ae3888335400a48b33fb6.png" alt="\rho'|\sigma'"/> value to the target value B given by the
<strong class="command">--norm</strong> switch:</p>
<div class="math">
<p><img src="_images/math/753bb834207dc51e12eb1d4dfd4ce7a91d1fc310.png" alt="A = \frac{B}{\rho'/\sigma'}"/></p>
</div></div>
<div class="section" id="determining-relaxation-time-ranges">
<h2>Determining relaxation time ranges<a class="headerlink" href="#determining-relaxation-time-ranges" title="Permalink to this headline">¶</a></h2>
<p>The following approach to select <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values is called ‘data’</p>
<p>For forward modelling and inversions there is always the question of which
range of relaxation times to consider. To answer this we consider the typical
frequency range of measurements from 1 mHz to 50 kHz. By considering one-term
debye models we can compute the minimum and maximum <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values using
the formula:</p>
<div class="math">
<p><img src="_images/math/224115c58509ed0d8294873926e755ca2c054de6.png" alt="\tau_{peak} = \frac{1}{2 \pi f_{peak}}\\
\tau_{min}(0.001~Hz) &amp;= 159.15~s\\
\tau_{max}(1e5~Hz) &amp;= 1.5915e-06~s"/></p>
</div><p>For the implementation the number of <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values <img class="math" src="_images/math/a1eea7590e1409d0b80d6fb7ed1fb95a16184b8b.png" alt="N_D"/> per decade
is specified. The maximum <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/>-interval corresponds to the frequency
range <img class="math" src="_images/math/f6f4c1af5c9fa59e39d709b2086e59c3b938d4a3.png" alt="[1e-3~s, 1e5~s]"/>. Now compute the total number <img class="math" src="_images/math/3bfb3a64189a14b2704f4610827762d5e3145114.png" alt="N"/> of
<img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values using the formula</p>
<div class="math">
<p><img src="_images/math/0935ed9ab6be346b5d62848467a15ab3180fa985.png" alt="N = |log_{10}(f_{min}) - log_{10}(f_{max})| \cdot N_D"/></p>
</div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>The maximum frequency range considered here spans exactly 8 decades. Thus
no rounding needs to take place.</p>
</div>
<p>The pool of possible <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values is now created by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">N_D</span><span class="p">)</span>
</pre></div>
</div>
<p>The <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values for a real data set will now be selected from this
pool, depending on the minimum and maximum frequency of the data set. This
procedure ensures that always the same <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values are used
independently from the minimum and maximum data frequencies. However, the
<img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values will still be dependend on <img class="math" src="_images/math/a1eea7590e1409d0b80d6fb7ed1fb95a16184b8b.png" alt="N_D"/>!</p>
<p>(<a class="reference external" href=".//usage_and_implementation-1.py">Source code</a>)</p>
<p>(<a class="reference external" href=".//usage_and_implementation-2.py">Source code</a>)</p>
<p>The following approach to selecting <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values is called ‘data_ext’.</p>
<p>This approach adds one frequency decade to each of the frequency limits of the
data prior to converting those limits to <img class="math" src="_images/math/914b2d4b6659b86d3153d5510839dfb254dfc8a3.png" alt="\tau"/> values.</p>
</div>
<div class="section" id="using-the-cole-cole-distribution">
<h2>Using the Cole-Cole distribution<a class="headerlink" href="#using-the-cole-cole-distribution" title="Permalink to this headline">¶</a></h2>
<p>A single-termin Cole-Cole spectrum with c = 0.5 was fitted using kernel
functions of c = (0.3, 0.5, 0.7, and 1.0).</p>
<ul>
<li><p>c = 0.3:</p>
<p>The kernel function is too wide to fit the response:</p>
<img alt="_images/plot_spec_000_iteration0001.png" src="_images/plot_spec_000_iteration0001.png" />
</li>
<li><p>c = 0.5</p>
<p>The kernel function has the same slope as the response. Any widening of the
peak in the RTD is due to regularisation smoothing.</p>
<img alt="_images/plot_spec_000_iteration0012.png" src="_images/plot_spec_000_iteration0012.png" />
</li>
<li><p>c = 0.7</p>
<img alt="_images/plot_spec_000_iteration0004.png" src="_images/plot_spec_000_iteration0004.png" />
</li>
<li><p>c = 1.0</p>
<img alt="_images/plot_spec_000_iteration00041.png" src="_images/plot_spec_000_iteration00041.png" />
</li>
</ul>
</div>
<div class="section" id="creating-synthetic-relaxation-time-distributions">
<h2>Creating synthetic relaxation time distributions<a class="headerlink" href="#creating-synthetic-relaxation-time-distributions" title="Permalink to this headline">¶</a></h2>
<p>The <img class="math" src="_images/math/dbc357e9cf742d661bf4941cd0c41ec78cbbe187.png" alt="\tau_i"/> distribution is determined by the frequencies of the data
and number of values per frequency decade set by the user. For synthetic
studies or benchmarks we need to set the corresponding <img class="math" src="_images/math/c3c0e9ec2081f2ef618ad9de05046301ca287d6c.png" alt="g_i"/> values for
those relaxation times. We do this either by explicitly setting those
relaxation times for a small number of terms (usually one to three in
correspondence to the Cole-Cole/Debye model), or by addition of one or more
log-normal distributions to the <img class="math" src="_images/math/c3c0e9ec2081f2ef618ad9de05046301ca287d6c.png" alt="g_i"/> distribution.</p>
<p>(<a class="reference external" href=".//usage_and_implementation-3.py">Source code</a>, <a class="reference external" href=".//usage_and_implementation-3.png">png</a>, <a class="reference external" href=".//usage_and_implementation-3.hires.png">hires.png</a>, <a class="reference external" href=".//usage_and_implementation-3.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/usage_and_implementation-3.png" src="_images/usage_and_implementation-3.png" />
</div>
<p>Normally distributed noise can then be added to this spectrum:</p>
<p>(<a class="reference external" href=".//usage_and_implementation-4.py">Source code</a>, <a class="reference external" href=".//usage_and_implementation-4.png">png</a>, <a class="reference external" href=".//usage_and_implementation-4.hires.png">hires.png</a>, <a class="reference external" href=".//usage_and_implementation-4.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="_images/usage_and_implementation-4.png" src="_images/usage_and_implementation-4.png" />
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Time-lapse Cole-Cole decomposition routines</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="fit_routines.html">Fit Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory of SIP models</a></li>
<li class="toctree-l1"><a class="reference internal" href="inversion.html">Inversion and implementation details</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage and implementation details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data_formats.html">Input Data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_formats.html#output-files">Output Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="starting_models.html">Starting Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices">Best practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalization">Normalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#determining-relaxation-time-ranges">Determining relaxation time ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-cole-cole-distribution">Using the Cole-Cole distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-synthetic-relaxation-time-distributions">Creating synthetic relaxation time distributions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Profiling and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="inversion.html" title="previous chapter">Inversion and implementation details</a></li>
      <li>Next: <a href="data_formats.html" title="next chapter">Input Data files</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2018, Maximilian Weigand and Department of Geophysics, University of Bonn.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/usage_and_implementation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>